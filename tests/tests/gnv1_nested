###############################################################################
#
#  HAFS global with 1 nest and atmosphere only using global_nest_v1 physics
#
###############################################################################

export TEST_DESCR="Compare rotated C96 global with 1 nest and atmosphere only global_nest_v1 physics results with previous version"

export CNTL_DIR=gnv1_nested

export LIST_FILES="atmf006.nc \
                   sfcf006.nc \
                   atm.nest02.f006.nc \
                   sfc.nest02.f006.nc \
                   RESTART/20230224.120000.coupler.res \
                   RESTART/20230224.120000.fv_core.res.nc \
                   RESTART/20230224.120000.fv_core.res.nest02.nc \
                   RESTART/20230224.120000.fv_core.res.nest02.tile7.nc \
                   RESTART/20230224.120000.fv_core.res.tile1.nc \
                   RESTART/20230224.120000.fv_core.res.tile2.nc \
                   RESTART/20230224.120000.fv_core.res.tile3.nc \
                   RESTART/20230224.120000.fv_core.res.tile4.nc \
                   RESTART/20230224.120000.fv_core.res.tile5.nc \
                   RESTART/20230224.120000.fv_core.res.tile6.nc \
                   RESTART/20230224.120000.fv_srf_wnd.res.nest02.tile7.nc \
                   RESTART/20230224.120000.fv_srf_wnd.res.tile1.nc \
                   RESTART/20230224.120000.fv_srf_wnd.res.tile2.nc \
                   RESTART/20230224.120000.fv_srf_wnd.res.tile3.nc \
                   RESTART/20230224.120000.fv_srf_wnd.res.tile4.nc \
                   RESTART/20230224.120000.fv_srf_wnd.res.tile5.nc \
                   RESTART/20230224.120000.fv_srf_wnd.res.tile6.nc \
                   RESTART/20230224.120000.fv_tracer.res.nest02.tile7.nc \
                   RESTART/20230224.120000.fv_tracer.res.tile1.nc \
                   RESTART/20230224.120000.fv_tracer.res.tile2.nc \
                   RESTART/20230224.120000.fv_tracer.res.tile3.nc \
                   RESTART/20230224.120000.fv_tracer.res.tile4.nc \
                   RESTART/20230224.120000.fv_tracer.res.tile5.nc \
                   RESTART/20230224.120000.fv_tracer.res.tile6.nc \
                   RESTART/20230224.120000.phy_data.nest02.tile7.nc \
                   RESTART/20230224.120000.phy_data.tile1.nc \
                   RESTART/20230224.120000.phy_data.tile2.nc \
                   RESTART/20230224.120000.phy_data.tile3.nc \
                   RESTART/20230224.120000.phy_data.tile4.nc \
                   RESTART/20230224.120000.phy_data.tile5.nc \
                   RESTART/20230224.120000.phy_data.tile6.nc \
                   RESTART/20230224.120000.sfc_data.nest02.tile7.nc \
                   RESTART/20230224.120000.sfc_data.tile1.nc \
                   RESTART/20230224.120000.sfc_data.tile2.nc \
                   RESTART/20230224.120000.sfc_data.tile3.nc \
                   RESTART/20230224.120000.sfc_data.tile4.nc \
                   RESTART/20230224.120000.sfc_data.tile5.nc \
                   RESTART/20230224.120000.sfc_data.tile6.nc \
                   RESTART/fv_BC_ne.res.nest02.nc \
                   RESTART/fv_BC_sw.res.nest02.nc"


export_fv3
export_tiled

export NESTED=.true.

export SYEAR=2023
export SMONTH=02
export SDAY=24
export SHOUR=00
export FHMAX=18
export FHROT=0
export DT_ATMOS=450
export RESTART_INTERVAL='12 -1'
export WRITE_GROUP=2
export WRTTASK_PER_GROUP=12
export WRITE_DOPOST=.true.
export WRITE_NSFLIP=.true.
export FILENAME_BASE="'atm' 'sfc'"
export OUTPUT_GRID=gaussian_grid
export OUTPUT_FILE="'netcdf' 'netcdf'"
export IDEFLATE=1
export ICHUNK2D=-1
export JCHUNK2D=-1
export ICHUNK3D=-1
export JCHUNK3D=-1
export KCHUNK3D=1
export IMO=384
export JMO=192
export OUTPUT_FH='6 -1'
export NTILES=6

export OUTPUT_GRID_2=regional_latlon
export IMO_2=361
export JMO_2=241
export CEN_LON_2=-135.0
export CEN_LAT_2=32.5
export LON1_2=-195.000000
export LAT1_2=-7.500000
export LON2_2=-75.000000
export LAT2_2=72.500000
export DLON_2=0.25
export DLAT_2=0.25

export BLOCKSIZE=32
export CCPP_SUITE=FV3_global_nest_v1
export MAX_OUTPUT_FIELDS=300
export DOMAINS_STACK_SIZE=16000000

export TILE_COARSE="0,6"
export NUM_TILE_TOP=6
export NEST_REFINE="0,4"
export NEST_IOFFSETS="0,4"
export NEST_JOFFSETS="0,9"

export NPX=97
export NPY=97
export NPZ=127
export DNATS=0
export DO_SAT_ADJ=.false.
export FAST_TAU_W_SEC=0.2
export TARGET_LON=-135.0
export TARGET_LAT=32.5
export TWOWAYNEST02=.true.

export H2O_PHYS=.true.
export IMP_PHYSICS=8
export IOVR=3
export DT_INNER=450
export DO_MYNNEDMF=.true.
export DO_MYNNSFCLAY=.true.
export BL_MYNN_TKEADVECT=.true.
export GWD_OPT=2
export DO_UGWP_V1=.true.
export DO_UGWP_V0=.false.
export DO_GSL_DRAG_LS_BL=.true.
export DO_GSL_DRAG_TOFD=.true.
export IALB=2
export IEMS=2
export IAER=1011
export ICLIQ_SW=2
export CNVGWD=.true.
export HYBEDMF=.false.
export SATMEDMF=.false.
export ISATMEDMF=1
export LHEATSTRG=.false.
export LSEASPRAY=.true.
export IMFSHALCNV=5
export IMFDEEPCNV=5
export PROGSIGMA=.true.
export BETASCU=0.5
export BETAMCU=1.5
export BETADCU=8.0
export CDMBWD=20.0,2.5,1.0,1.0
export IOPT_DIAG=1
export NSTF_NAME=2,0,0,0,0
export EFFR_IN=.true.
export RF_CUTOFF=10.
export RES_LATLON_DYNAMICS='""'
export DOGP_CLDOPTICS_LUT=.false.
export DOGP_LWSCAT=.false.

export KNOB_UGWP_DOKDIS=2
export KNOB_UGWP_NDX4LH=4
export KNOB_UGWP_VERSION=1
export KNOB_UGWP_PALAUNCH=275.0e2

export ATMRES=C96-nested

export FNALBC="'${ATMRES}.snowfree_albedo.tileX.nc'"
export FNALBC2="'${ATMRES}.facsf.tileX.nc'"
export FNTG3C="'${ATMRES}.substrate_temperature.tileX.nc'"
export FNVEGC="'${ATMRES}.vegetation_greenness.tileX.nc'"
export FNVETC="'${ATMRES}.vegetation_type.tileX.nc'"
export FNSOTC="'${ATMRES}.soil_type.tileX.nc'"
export FNSOCC="'${ATMRES}.soil_color.tileX.nc'"
export FNSMCC=${FNSMCC_control}
export FNMSKH=${FNMSKH_control}
export FNVMNC="'${ATMRES}.vegetation_greenness.tileX.nc'"
export FNVMXC="'${ATMRES}.vegetation_greenness.tileX.nc'"
export FNSLPC="'${ATMRES}.slope_type.tileX.nc'"
export FNABSC="'${ATMRES}.maximum_snow_albedo.tileX.nc'"

export FNTSFA="'        '"
export FNACNA="''"
export FNSNOA="''"

export LANDICE=.false.
export NPX_NEST02=361
export NPY_NEST02=241
export INPES_NEST02=12
export JNPES_NEST02=10
export TWOWAYNEST=.true.

export INPES=4
export JNPES=4

export GRID_PES="$(( INPES * JNPES * 6 )),$(( INPES_NEST02 * JNPES_NEST02 ))"

export MODEL_CONFIGURE=model_configure_gnv1.IN
export INPUT_NML=input_global_parent.nml.IN
export INPUT_NEST02_NML=input_global_nest.nml.IN
export TILEDFIX=.true.
export FIELD_TABLE=field_table_thompson_aero_tke_progsigma

ATM_compute_tasks=$(( INPES*JNPES*NTILES + INPES_NEST02*JNPES_NEST02 ))
